{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
  <h2>New Products</h2>
  <div class="product-list">
    {% for product in latest_products %}
      <div class="product-item">
        {% if product.images.exists %}
          {% with product.images.first as first_image %}
            <img src="{{ first_image.images.url }}" alt="{{ product.name }} Image" style="max-width: 200px; max-height: 200px;">
          {% endwith %}
        {% else %}
          <img src="{% static 'img/default-product-image.png' %}" alt="Default Product Image" style="max-width: 200px; max-height: 200px;">
        {% endif %}
        <h3><a href="{% url 'product:product-detail' product.id %}">{{ product.name }}</a></h3>
        <p>Price: ${{ product.price }}</p>
        <p><a href="{% url 'product:product-detail' product.id %}">View details</a></p>
      </div>
    {% endfor %}
  </div>

  {% if user.is_authenticated %}
    {% block logged_in_content %} {% endblock %}
    <a href="{% url 'logout' %}">Logout</a>
  {% else %}
    <p>You are not logged in</p>
    <a href="{% url 'login' %}">Login</a>
    <a href="{% url 'register' %}">Signup</a>
  {% endif %}
{% endblock %}
